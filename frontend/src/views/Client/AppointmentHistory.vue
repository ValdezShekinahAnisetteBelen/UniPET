<template>
  <head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name='robots' content='max-image-preview:large' />
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
  <link rel="alternate" type="application/rss+xml" title="Buddy &raquo; Feed" href="feed/index.html" />
  <link rel="alternate" type="application/rss+xml" title="Buddy &raquo; Comments Feed" href="comments/feed/index.html" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  
  <link rel='stylesheet' id='pawsitive-fonts-css' href='https://fonts.googleapis.com/css?family=Nunito+Sans%3A100%2C200%2C300%2C400%2C500%2C600%2C700%2C800%2C900%2C100italic%2C200italic%2C300italic%2C400italic%2C500italic%2C600italic%2C700italic%2C800italic%2C900italic%7CNunito%3A100%2C200%2C300%2C400%2C500%2C600%2C700%2C800%2C900%2C100italic%2C200italic%2C300italic%2C400italic%2C500italic%2C600italic%2C700italic%2C800italic%2C900italic%7CNunito+Sans%3A100%2C200%2C300%2C400%2C500%2C600%2C700%2C800%2C900%2C100italic%2C200italic%2C300italic%2C400italic%2C500italic%2C600italic%2C700italic%2C800italic%2C900italic%7CNunito+Sans%3A100%2C200%2C300%2C400%2C500%2C600%2C700%2C800%2C900%2C100italic%2C200italic%2C300italic%2C400italic%2C500italic%2C600italic%2C700italic%2C800italic%2C900italic%7CNunito+Sans%3A100%2C200%2C300%2C400%2C500%2C600%2C700%2C800%2C900%2C100italic%2C200italic%2C300italic%2C400italic%2C500italic%2C600italic%2C700italic%2C800italic%2C900italic%7CNunito%3A100%2C200%2C300%2C400%2C500%2C600%2C700%2C800%2C900%2C100italic%2C200italic%2C300italic%2C400italic%2C500italic%2C600italic%2C700italic%2C800italic%2C900italic&#038;subset=latin%2Clatin-ext&#038;ver=1.0.0' type='text/css' media='all' />
  
  <link rel="https://api.w.org/" href="wp-json/index.html" />
  <link rel="alternate" type="application/json" href="../../../../frontend/public/User/wp-json/wp/v2/pages/2767.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
  <meta name="generator" content="WordPress 6.3.2" />
  <meta name="generator" content="WooCommerce 8.2.0" />
  <link rel="canonical" href="index.html" />
  <link rel='shortlink' href='index.html' />
  <link rel="alternate" type="application/json+oembed" href="../../../../frontend/public/User/wp-json/oembed/1.0/embed0ee1.json" />
  <link rel="alternate" type="text/xml+oembed" href="../../../../frontend/public/User/wp-json/oembed/1.0/embed858d" />
   
  <link rel="icon" href="../../../../frontend/public/User/wp-content/uploads/sites/2/2019/07/cropped-favicon-1-32x32.png" sizes="32x32" />
  <link rel="icon" href="../../../../frontend/public/User/wp-content/uploads/sites/2/2019/07/cropped-favicon-1-192x192.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="../../../../frontend/public/User/wp-content/uploads/sites/2/2019/07/cropped-favicon-1-180x180.png" />
  <meta name="msapplication-TileImage" content="https://pawsitive.bold-themes.com/buddy/wp-content/uploads/sites/2/2019/07/cropped-favicon-1-270x270.png"/>
  </head>
  <body class="home page-template-default page page-id-2767 page-parent theme-pawsitive bt_bb_plugin_active bt_bb_fe_preview_toggle woocommerce-js btHeadingWeight_default btMenuWeight_default btCurrentPage_default btButtonWeight_default btMenuRightEnabled btStickyEnabled btHideHeadline btLightSkin btBelowMenu btNoDashInSidebar noBodyPreloader btDropButtons btTransparentDarkHeader btNoSidebar btMenuRight btMenuInitFinished btRemovePreloader btMenuHorizontal">
  
  <div class="btPageWrap" id="top">
    
      <div class="btVerticalHeaderTop">
          <div class="btVerticalMenuTrigger">&nbsp;<div class="bt_bb_icon" data-bt-override-class="null"><a href="#" target="_self" data-ico-fa="" class="bt_bb_icon_holder"></a></div></div>
        
      <div class="btLogoArea">
        <div class="logo">
          <span>
            <a href="index.html"><img class="btMainLogo" data-hw="2.1111111111111" src="../../../../frontend/public/User/wp-content/uploads/sites/2/2019/11/logo_black.svg" alt=""></a></span>
        </div><!-- /logo -->
      </div><!-- /btLogoArea -->
    </div>
  <header class="mainHeader btClear gutter ">
      <div class="mainHeaderInner">
              <div class="btLogoArea menuHolder btClear">
          <div class="port">
                        <div class="btHorizontalMenuTrigger">&nbsp;<div class="bt_bb_icon" data-bt-override-class="null"><a href="#" target="_self" data-ico-fa="" class="bt_bb_icon_holder"></a></div></div>
                      <div class="logo">
              <span>
                <a href="index.html"><img class="btMainLogo" data-hw="2.1111111111111" src="User/wp-content/uploads/sites/2/2019/11/logo_black.svg" alt="Buddy"></a></span>
            </div>
                      <div class="menuPort">
                        <div class="topBarInMenu">
              <div class="topBarInMenuCell">
                <div class="btButtonWidget btOutline btWithLink"><a href="#" target="_self" class="btButtonWidgetLink"><div class="btIconWidgetIcon"><span data-ico-fontawesome="" class="bt_bb_icon_holder"></span></div><div class="btIconWidgetText">
                  <span class="btButtonWidgetText">+63 998 868 3908</span>
                </div>
              </a>
              </div>						
              </div>
            </div>
  
            <nav>
      <ul id="menu-primary-menu" class="menu">
          <li id="menu-item-1685" class="btMenuWideDropdown menu-item menu-item-type-post_type menu-item-object-page menu-item-home current-menu-item page_item page-item-2767 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-1685 btMenuWideDropdownCols-3">
              <div class="subToggler"></div>
              <a href="/" aria-current="page">Home</a>
          </li>

          <li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-41">
    <div class="subToggler"><span class="dropdown-icon">▼</span></div>
    <a href="/shop">Shop</a>
    <ul class="sub-menu">
        <li id="menu-item-45" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42">
            <a href="/OrderHistory">My Purchases</a>
        </li>
    </ul>
  </li>

       <li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-41">
    <div class="subToggler"><span class="dropdown-icon">▼</span></div>
    <a href="/PetInfo">Appointment</a>
    <ul class="sub-menu">
        <li id="menu-item-43" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42">
            <a href="/AppointmentHistory">Appointment History</a>
        </li>
    </ul>
  </li>
  
          <li id="menu-item-40" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-40">
              <div class="subToggler"></div>
              <a href="/Contact">Contact Us</a>
          </li>
          
          <li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-41">
    <div class="subToggler"><span class="dropdown-icon">▼</span></div>
    <a href="/UserProfile">Profile</a>
    <ul class="sub-menu">
        <li id="menu-item-44" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42">
          <a href="#" @click.prevent="logout" class="logout-link">Logout</a>
        </li>
    </ul>
  </li>
      </ul>
  </nav>
  
            </div>
          </div>
        </div>
      </div>
      </header>  
      
      
      <div class="animal-picture">
    <section id="bt_bb_section653e182cbf96f" data-parallax="0.7" data-parallax-offset="0" class="bt_bb_section bt_bb_color_scheme_1 bt_bb_layout_boxed_1200 bt_bb_vertical_align_top bt_bb_parallax bt_bb_background_image bt_bb_top_spacing_large bt_bb_bottom_spacing_large bt_bb_section_with_bottom_coverage_image" style="background-color: #96E6F7; background-image: url(&quot;https_/pawsitive.bold-themes.com/buddy/wp-content/uploads/sites/2/2019/08/background_05.html&quot;); --section-primary-color: #ffffff; --section-secondary-color: #EDCCCD; background-position-y: 0px;" data-bt-override-class="null"><div class="bt_bb_port"><div class="bt_bb_cell"><div class="bt_bb_cell_inner"><div class="bt_bb_row_wrapper"><div class="bt_bb_row" data-bt-override-class="{}" data-structure="6-6">
      <div class="bt_bb_column col-xxl-6 col-xl-6 bt_bb_vertical_align_top bt_bb_align_left bt_bb_padding_normal bt_bb_shape_inherit" data-width="6" data-bt-override-class="{}">
</div>
  </div></div></div></div></div><div class="bt_bb_section_bottom_section_coverage_image"><img src="User/wp-content/uploads/sites/2/2019/08/white_bottom_wave_02.png" alt="bt_bb_section_bottom_section_coverage_image"></div></section>
      </div>
      
  <!-- Close the .about-us div here -->
 
<!-- User Information -->
<!-- Combined User and Pet Information Form -->


<div class="form-row d-flex justify-content-center">
  <div class="form-group col-md-6" style="position: relative;">
    <label for="petId" class="text-white bg-info p-2 rounded mb-0">Choose Appointment History</label>
    <select id="petId" class="custom-select" v-model="selectedPetId" @change="handlePetIdChange" style="width: 100%; border-radius: 0.25rem; background-color: #f8f9fa;">
      <option v-for="petId in petIds" :key="petId" :value="petId">{{ petId }}</option>
    </select>
    <div style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);">
      <i class="fas fa-caret-down" style="position: absolute; font-size: 18px; color: #495057;"></i>
    </div>
  </div>
</div>


<div v-if="userData" class="container mt-5">
  <form class="card" style="max-width: 600px; margin: 0 auto; padding: 20px; border: 2px solid #17a2b8; border-radius: 10px;" @submit.prevent="saveData">
    <h2 class="text-center mb-4">{{ userData.full_name }} Information</h2>

    <!-- Hidden input for user ID -->
    <input type="hidden" v-model="formData.id">

    <!-- User Information Section -->
    <div class="form-row">
      <div v-for="(value, field) in formData" :key="field" class="form-group col-md-6">
        <label :for="field">{{ capitalize(field.replace('_', ' ')) }}</label>
        <input
          :type="field === 'email_address' ? 'email' : 'text'"
          class="form-control"
          :id="field"
          :placeholder="getPlaceholder(field)"
          v-model="formData[field]"
          :readonly="!editMode"
          :style="{ 'background-color': editMode ? '#17a2b8' : 'inherit', 'color': editMode ? '#ffffff' : 'inherit' }"
        >
      </div>
    </div>

    <!-- Pet Information Section -->
    <div class="form-row">
      <!-- Image Display with Pet Name -->
      <h2 class="text-center mb-4">PET {{ userData.pet_name }} Information</h2>
      <div class="form-group col-md-12 text-center">
        <img :src="formData2.image" :title="userData.pet_name" :alt="userData.pet_name" class="img-fluid mb-2">
        <label for="petName">{{ userData.pet_name }}</label>
      </div>
      <!-- Choose File Button -->
      <div class="form-group col-md-12 text-center">
        <label for="fileInput" class="btn btn-outline-info" style="border-radius: 10px; cursor: pointer;">
          <i class="fas fa-edit"></i> Edit Pet Profile
          <input type="file" id="fileInput" style="display: none;" @change="handleFileChange">
        </label>
      </div>
      <!-- Other Form Fields -->
      <div v-for="(value, field) in formData2" :key="field" class="form-group col-md-6">
        <label :for="field">{{ capitalize(field.replace('_', ' ')) }}</label>
        <!-- Update the input type based on the field -->
        <input
          :type="field === 'pet_name' ? 'text' : 'text'"
          class="form-control"
          :id="field"
          :placeholder="getPlaceholder(field)"
          v-model="formData2[field]"
          :readonly="!editMode"
          :style="{ 'background-color': editMode ? '#17a2b8' : 'inherit', 'color': editMode ? '#ffffff' : 'inherit' }"
        
        >
      </div>
    </div>

    <!-- Save Button -->
    <button class="btn btn-outline-info btn-block" style="border: 2px solid #17a2b8; border-radius: 10px;" @click="toggleEditMode">
      {{ editMode ? 'Save' : 'Edit' }}
    </button>
  </form>
</div>
<div v-if="userData" class="container mt-5">
  <form class="card" style="max-width: 600px; margin: 0 auto; padding: 20px; border: 2px solid #17a2b8; border-radius: 10px;">
    <h2 class="text-center mb-4">REQUEST</h2>
    <div class="form-row">
      <div v-for="(value, field) in formData3" :key="field" class="form-group col-md-6">
        <label :for="field">{{ capitalize(field.replace('_', ' ')) }}</label>
        <input :type="field === 'grooming_type' ? 'text' : 'text'" class="form-control" :id="field" :placeholder="getPlaceholder(field)" v-model="formData3[field]" :readonly="!editMode" :style="{ backgroundColor: field === 'status' ? getStatusColor(formData3.status) : '', color: field === 'status' ? (getStatusColor(formData3.status) === 'Pending' ? 'black' : 'white') : 'black' }">
      </div>
    </div>
  </form>

</div>

<div class="container mt-3 mb-3 d-flex justify-content-center">
  <router-link :to="{ path: '/PetInfo' }" class="btn btn-outline-info btn-sm" :style="{ border: '2px solid #17a2b8' }">
    <i class="fas fa-address-card"></i> Make Another Appointment
  </router-link>
</div>






    <div class="btSiteFooter">
  
  <div class="bt_bb_wrapper"><section id="bt_bb_section653e328393367" class="bt_bb_section bt_bb_layout_boxed_1200 bt_bb_vertical_align_top bt_bb_top_spacing_large bt_bb_bottom_spacing_normal" data-bt-override-class="null"><div class="bt_bb_port">
    
    <div class="bt_bb_cell"><div class="bt_bb_cell_inner"><div class="bt_bb_row_wrapper"><div class="bt_bb_row" data-bt-override-class="{}" data-structure="3-3-3-3"><div class="bt_bb_column col-xxl-3 col-xl-3 bt_bb_vertical_align_top bt_bb_align_left bt_bb_padding_normal bt_bb_animation_fade_in animate bt_bb_shape_inherit animated" data-width="3" data-bt-override-class="{}">
      <div class="bt_bb_column_content"><div class="bt_bb_column_content_inner"><div class="bt_bb_image bt_bb_shape_square bt_bb_align_inherit bt_bb_hover_style_simple bt_bb_content_display_always bt_bb_content_align_middle" data-bt-override-class="null"><span><img src="User/wp-content/uploads/sites/2/2019/11/logo_black.svg" alt="Buddy" class="btLazyLoadImage btLazyLoaded"></span></div><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_normal" data-bt-override-class="null"></div><div class="bt_bb_icon bt_bb_color_scheme_6 bt_bb_style_filled bt_bb_shape_circle bt_bb_size_small bt_bb_align_inherit" style="; --icon-primary-color:#ffffff; --icon-secondary-color:#0CC0DF;" data-bt-override-class="null"><a href="https://twitter.com/bold_themes" target="_blank" data-ico-fontawesome="" class="bt_bb_icon_holder"></a></div><div class="bt_bb_icon bt_bb_color_scheme_6 bt_bb_style_filled bt_bb_shape_circle bt_bb_size_small bt_bb_align_inherit" style="; --icon-primary-color:#ffffff; --icon-secondary-color:#0CC0DF;" data-bt-override-class="null"><a href="https://www.instagram.com/bold_themes/" target="_blank" data-ico-fontawesome="" class="bt_bb_icon_holder"></a></div><div class="bt_bb_icon bt_bb_color_scheme_6 bt_bb_style_filled bt_bb_shape_circle bt_bb_size_small bt_bb_align_inherit" style="; --icon-primary-color:#ffffff; --icon-secondary-color:#0CC0DF;" data-bt-override-class="null"><a href="https://www.facebook.com/boldthemes/" target="_blank" data-ico-fontawesome="" class="bt_bb_icon_holder"></a></div><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_medium" data-bt-override-class="null"></div></div></div></div><div class="bt_bb_column col-xxl-3 col-xl-3 bt_bb_vertical_align_top bt_bb_align_left bt_bb_padding_normal bt_bb_animation_fade_in animate bt_bb_shape_inherit animated" data-width="3" data-bt-override-class="{}"><div class="bt_bb_column_content"><div class="bt_bb_column_content_inner"><header class="bt_bb_headline bt_bb_color_scheme_3 bt_bb_dash_none bt_bb_size_extrasmall bt_bb_align_inherit" style="; --primary-color:#0CC0DF; --secondary-color:#EDCCCD;" data-bt-override-class="{}"><h5 class="bt_bb_headline_tag"><span class="bt_bb_headline_content"><span>About</span></span></h5></header><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_small" data-bt-override-class="null"></div><div class="bt_bb_icon bt_bb_style_borderless bt_bb_shape_circle bt_bb_size_xsmall bt_bb_align_left" data-bt-override-class="null"><span data-ico-dripicons="" class="bt_bb_icon_holder">
        <span>Main: J.P Rizal St. Tawiran, Calapan City</span></span></div><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_small" data-bt-override-class="null"></div>
    <div class="bt_bb_icon bt_bb_style_borderless bt_bb_shape_circle bt_bb_size_xsmall bt_bb_align_left" data-bt-override-class="null"><span data-ico-dripicons="" class="bt_bb_icon_holder"><span>+63 998 868 3908</span></span></div><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_small" data-bt-override-class="null"></div><div class="bt_bb_icon bt_bb_style_borderless bt_bb_shape_circle bt_bb_size_xsmall bt_bb_align_left" data-bt-override-class="null"><span data-ico-dripicons="" class="bt_bb_icon_holder"><span>Thursday - Friday - Sunday: <br><br> 9:00 AM TO 11:00 AM <br><br> 2:00 PM TO 4:00 PM</span></span></div><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_medium" data-bt-override-class="null"></div></div></div></div><div class="bt_bb_column col-xxl-3 col-xl-3 bt_bb_vertical_align_top bt_bb_align_left bt_bb_padding_normal bt_bb_animation_fade_in animate bt_bb_shape_inherit animated" data-width="3" data-bt-override-class="{}"><div class="bt_bb_column_content"><div class="bt_bb_column_content_inner"><header class="bt_bb_headline bt_bb_color_scheme_3 bt_bb_dash_none bt_bb_size_extrasmall bt_bb_align_inherit" style="; --primary-color:#0CC0DF; --secondary-color:#EDCCCD;" data-bt-override-class="{}"><h5 class="bt_bb_headline_tag"><span class="bt_bb_headline_content"><span>Quick Links</span></span></h5></header><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_small" data-bt-override-class="null"></div><div class="bt_bb_custom_menu bt_bb_direction_vertical"><div class="menu-quick-links-container"><ul id="menu-quick-links" class="menu"><li id="menu-item-2555" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2555"><a href="#">Veterinary Services</a></li>
  <li id="menu-item-2556" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2556"><a href="#">Grooming Services</a></li>
  <li id="menu-item-2557" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2557"><a href="#">Bathing Services</a></li>
  <li id="menu-item-2558" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2558"><a href="#">Request an Appointment</a></li>
  </ul></div></div><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_medium" data-bt-override-class="null"></div></div></div></div>
  <div class="bt_bb_column col-xxl-3 col-xl-3 bt_bb_vertical_align_top bt_bb_align_left bt_bb_padding_normal bt_bb_animation_fade_in animate bt_bb_shape_inherit animated" data-width="3" data-bt-override-class="{}"><div class="bt_bb_column_content"><div class="bt_bb_column_content_inner"><header class="bt_bb_headline bt_bb_color_scheme_3 bt_bb_dash_none bt_bb_size_extrasmall bt_bb_align_inherit" style="; --primary-color:#0CC0DF; --secondary-color:#EDCCCD;" data-bt-override-class="{}"><h5 class="bt_bb_headline_tag"><span class="bt_bb_headline_content"><span>Newsletter</span></span></h5></header><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_small" data-bt-override-class="null"></div><div class="bt_bb_contact_form_7">
  <div class="wpcf7 js" id="wpcf7-f1539-p2767-o1" lang="en-US" dir="ltr">
  <div class="screen-reader-response"><p role="status" aria-live="polite" aria-atomic="true"></p> <ul></ul></div>
  <form action="https://pawsitive.bold-themes.com/buddy/#wpcf7-f1539-p2767-o1" method="post" class="wpcf7-form init" aria-label="Contact form" novalidate="novalidate" data-status="init">
  <div style="display: none;">
  <input type="hidden" name="_wpcf7" value="1539">
  <input type="hidden" name="_wpcf7_version" value="5.8.1">
  <input type="hidden" name="_wpcf7_locale" value="en_US">
  <input type="hidden" name="_wpcf7_unit_tag" value="wpcf7-f1539-p2767-o1">
  <input type="hidden" name="_wpcf7_container_post" value="2767">
  <input type="hidden" name="_wpcf7_posted_data_hash" value="">
  <input type="hidden" name="_wpcf7_recaptcha_response" value="">
  </div>
  <div class="btNewsletter">
    <div class="btNewsletterColumn">
      <p><span class="wpcf7-form-control-wrap" data-name="your-email"><input size="40" class="wpcf7-form-control wpcf7-email wpcf7-validates-as-required wpcf7-text wpcf7-validates-as-email" aria-required="true" aria-invalid="false" placeholder="Your email" value="" type="email" name="your-email"></span>
      </p>
    </div>
    <div class="btNewsletterButton">
      <p><input class="wpcf7-form-control wpcf7-submit has-spinner" type="submit" value="SUBSCRIBE"><span class="wpcf7-spinner"></span>
      </p>
    </div>
  </div><div class="wpcf7-response-output" aria-hidden="true"></div>
  </form>
  </div>
  </div><div class="bt_bb_separator bt_bb_border_style_none bt_bb_bottom_spacing_medium" data-bt-override-class="null"></div></div></div></div></div></div></div></div></div></section></div><footer class="btLightSkin"></footer>
  </div>
  
  


</div><!-- /pageWrap -->
</body>
 
  
      </template>
<script>
import router from '@/router';
import VuePaginator from 'vuejs-paginator';
import axios from 'axios';
import jQuery from 'jquery';
import 'jquery-ui';

const $ = jQuery.noConflict();

export default {
data() {
  return {
    petIds: [],            // Array to store pet_id values
    selectedPetId: null,    // Selected pet_id

    userData: [],
    formData: {
      email_address: '',
      full_name: '',
      area: '',
      city: '',
      postal_code: '',
      contact_no: '',
    },
    formData2: {
      pet_name: '',
      breed: '',
      date_of_birth: '',
      weight: '',
      color: '',
      temperature: '',
      image: '',
    },
    formData3: {
      appointment_date: '',
      appointment_type: '',
      grooming_type: '',
      grooming_shampoo: '',
      appointment_time: '',
      status: '', // Add the status field
    },
    editMode: false,
      initialFormData: {}, // New property to store initial form data
      isSaving: false,
  };
},
computed: {
  userId() {
    return this.$store.state.userId;
  },
},
created() {
  this.fetchPetIds();  // Fetch pet_id values when the component is mounted
  this.getUserData();
},
methods: {

  async fetchPetIds() {
      try {
        const response = await axios.get(`/api/getPetIdsByCustomerId/${this.$store.state.userId}`);
        this.petIds = response.data;  // Assuming the response is an array of pet_ids
      } catch (error) {
        console.error('Error fetching pet_ids:', error);
      }
    },
    async handlePetIdChange() {
  try {
    const response = await axios.get(`/api/getPetDataById/${this.selectedPetId}`);
    this.userData = response.data; // Assuming the API response contains the pet data

    // Update formData, formData2, and formData3 based on the new userData
    for (const field in this.formData) {
      if (this.userData[field] !== undefined) {
        this.formData[field] = this.userData[field];
      }
    }

    for (const field in this.formData2) {
      if (this.userData[field] !== undefined) {
        this.formData2[field] = this.userData[field];
      }
    }

    for (const field in this.formData3) {
      if (this.userData[field] !== undefined) {
        this.formData3[field] = this.userData[field];
      }
    }
  } catch (error) {
    console.error('Error fetching pet data:', error);
  }
},


  makeAnotherAppointment() {
      // Add logic here to handle making another appointment
      // For example, you can reset the form data or perform other actions
      console.log("Making another appointment...");

      // Redirect to the "/PetInfo" route
      router.push('/PetInfo');
    },
  
  getStatusColor(status) {
  switch (status) {
    case 'Pending':
      return 'orange';
    case 'Confirmed':
      return 'green';
    case 'Cancelled':
      return 'red';
    default:
      return ''; // You can set a default color if the status doesn't match any of the above
  }
},
  handleFileChange(event) {
      const fileInput = event.target;
      if (fileInput.files.length > 0) {
        // Get the selected file
        const selectedFile = fileInput.files[0];

        // Update the fileName property to display the selected file name
        this.fileName = selectedFile.name;

        // Update the formData2.image with the desired file path format
        // For example, assuming the file path starts with User\images\
        this.formData2.image = `User\\images\\${selectedFile.name}`;
      }
    },
  async getUserData() {
this.initialFormData = { ...this.userData };
try {
  const response = await axios.get(`getData1/${this.$store.state.userId}`);
this.userData = response.data[0];
console.log('API Response:', response.data);
  console.log(this.userData);

  // Update formData based on userData
 
  this.formData.email_address = this.userData.email_address;
  this.formData.full_name = this.userData.full_name;
  this.formData.area = this.userData.area;
  this.formData.city = this.userData.city;
  this.formData.postal_code = this.userData.postal_code;
  this.formData.contact_no = this.userData.contact_no;

  // Update formData2 based on userData
  this.formData2.pet_name = this.userData.pet_name;
  this.formData2.breed = this.userData.breed;
  this.formData2.date_of_birth = this.userData.date_of_birth;
  this.formData2.weight = this.userData.weight;
  this.formData2.color = this.userData.color;
  this.formData2.temperature = this.userData.temperature;
  this.formData2.image = this.userData.image; // Update the image property
  

  this.formData3.appointment_date = this.userData.appointment_date;
  this.formData3.appointment_type = this.userData.appointment_type;
  this.formData3.grooming_type = this.userData.grooming_type;
  this.formData3.grooming_shampoo = this.userData.grooming_shampoo;
  this.formData3.appointment_time = this.userData.appointment_time;
  this.formData3.status = this.userData.status; 
} catch (error) {
  console.error(error);
}
},
  capitalize(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  },
  getPlaceholder(field) {
    // Check if userData and the specific field are not undefined
    if (this.userData && this.userData[field] !== undefined) {
      return `${this.capitalize(field.replace('_', ' '))} for ${this.userData.pet_name}`;
    }
    return ''; // Return an empty string if userData or the specific field is undefined
  },
  getPlaceholder(field) {
    // Check if userData and the specific field are not undefined
    if (this.userData && this.userData[field] !== undefined) {
      return `${this.capitalize(field.replace('_', ' '))} for ${this.userData.full_name}`;
    }
    return ''; // Return an empty string if userData or the specific field is undefined
  },
  toggleEditMode() {
// If data is currently being edited
if (this.editMode) {
  const confirmed = window.confirm('Are you sure you want to save the changes?');
  if (!confirmed) {
    // If the user cancels the edit, revert to the initial form data
    this.formData = { ...this.initialFormData };
  } else {
    // Save data when changes are confirmed
    this.saveData();
  }
}
// Toggle edit mode
this.editMode = !this.editMode;
// If editMode is now true (meaning the button was clicked to edit), clone the formData to initialFormData
if (this.editMode) {
  this.initialFormData = JSON.parse(JSON.stringify(this.formData));
}
},

saveData() {
  this.isSaving = true;
   // Combine user and pet data
   const updatedData = {
      pet_id: this.userData.pet_id,
      full_name: this.formData.full_name,
      area: this.formData.area,
      city: this.formData.city,
      postal_code: this.formData.postal_code,
      contact_no: this.formData.contact_no,
      email_address: this.formData.email_address,
      pet_name: this.formData2.pet_name,
      breed: this.formData2.breed,
      date_of_birth: this.formData2.date_of_birth,
      weight: this.formData2.weight,
      color: this.formData2.color,
      temperature: this.formData2.temperature,
      image: this.formData2.image,
      // Add other fields as needed
  };

  axios.post(`/api/updatePetData/${this.userData.pet_id}`, updatedData)
    .then(response => {
  // Handle success

  this.isSaving = false;
  this.initialFormData = { ...this.formData };
})
    .catch(error => {
      // Handle error
      this.isSaving = false;
      console.error(error);
      alert('An error occurred while trying to save the changes. Please try again.');
    });
},
loadScripts() {
    if (this.myObject && this.myObject.content) {
      console.log(this.myObject.content);

      const scriptUrls = [
                      '/User/wp-includes/js/jquery/jquery.min3088.js',
              '/User/wp-includes/js/jquery/jquery-migrate.min5589.js',
              '/User/wp-content/plugins/bold-page-builder/slick/slick.min1849.js',
              '/User/wp-content/plugins/bold-page-builder/content_elements_misc/js/jquery.magnific-popup.min1849.js',
              '/User/wp-content/plugins/bold-page-builder/content_elements_misc/js/content_elements1849.js',
              '/User/wp-content/plugins/bt_cost_calculator/jquery.dde35d.js',
              '/User/wp-content/plugins/bt_cost_calculator/cc.maine35d.js',
              '/User/bt_cc_main-js-after.js',
              '/User/js1.js',
              '/User/js2.js',
              '/User/js3.js',
              '/User/js4.js',
              '/User/js5.js',
              '/User/js6.js',
              '/User/js7.js',
              '/User/js8.js',
              '/User/js9.js',
              '/User/js10.js',
              '/User/js11.js',
              '/User/js12.js',
              '/User/wp-content/plugins/contact-form-7/includes/swv/js/indexf658.js',
              '/User/wp-content/plugins/contact-form-7/includes/js/indexf658.js',
              '/User/wp-content/plugins/woocommerce/assets/js/jquery-blockui/jquery.blockUI.minf0ea.js',
              '/User/js13.js',
              '/User/wp-content/plugins/woocommerce/assets/js/frontend/add-to-cart.min2632.js',
              '/User/wp-content/plugins/woocommerce/assets/js/js-cookie/js.cookie.mine1a3.js',
              '/User/js14.js',
              '/User/wp-content/plugins/woocommerce/assets/js/frontend/woocommerce.min2632.js',
              '/User/wp-content/plugins/duracelltomi-google-tag-manager/js/gtm4wp-form-move-tracker7100.js',
              '/User/wp-content/themes/pawsitive/framework/js/fancySelecte35d.js',
              '/User/wp-content/themes/pawsitive/framework/js/header.misce35d.js',
              '/User/wp-content/themes/pawsitive/framework/js/misce35d.js',
              '/User/wp-content/plugins/bold-page-builder/content_elements/bt_bb_section/bt_bb_elementse35d.js',
              '/User/wp-content/themes/pawsitive/bold-page-builder/content_elements/bt_bb_floating_image/bt_bb_floating_imagee35d.js',
              '/User/wp-content/themes/pawsitive/bold-page-builder/content_elements/bt_bb_organic_animation/anime.mine35d.js',
              '/User/wp-content/themes/pawsitive/bold-page-builder/content_elements/bt_bb_organic_animation/maine35d.js',
              '/User/wp-includes/js/jquery/ui/core.min3f14.js',
              '/User/wp-includes/js/jquery/ui/datepicker.min3f14.js',
                          'https://code.jquery.com/jquery-3.5.1.slim.min.js',
              'https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js',
              'https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js',
            
            ];
      // Load jQuery first
      const jqueryScript = document.createElement('script');
      jqueryScript.src = scriptUrls[0]; // Assuming jQuery is the first script
      jqueryScript.async = true;
      jqueryScript.onload = () => {
        console.log('jQuery loaded successfully');
        // Now load other scripts
        scriptUrls.slice(1).forEach(url => {
          const script = document.createElement('script');
          script.src = url;
          script.async = true;
          script.onload = () => {
            console.log(`Script loaded successfully: ${url}`);
          };
          script.onerror = (error) => {
            console.error(`Error loading script: ${url}`, error);
          };

          document.head.appendChild(script);
        });

      };
      jqueryScript.onerror = (error) => {
        console.error('Error loading jQuery', error);
      };
      document.head.appendChild(jqueryScript);
    }
  },
},
mounted() {
  window.onload = () => {
    console.log('Window onload event triggered');
    this.loadScripts();
  };
},
};
</script>
  
  
  
      <style>
      
  @import '../../../src/assets/User/css/style2.css';
  @import '../../../src/assets/User/css/style4.css';
  @import '../../../src/assets/User/css/style5.css';
  @import '../../../src/assets/User/css/style6.css';
  @import '../../../src/assets/User/css/style7.css';
  @import '../../../src/assets/User/css/style8.css';
  @import '../../../src/assets/User/css/style9.css';
  @import '../../../src/assets/User/css/style10.css';
  @import '../../../src/assets/User/css/style13.css';
  @import '../../../src/assets/User/css/style14.css';
  @import '../../../src/assets/User/css/styles.css';
  @import '../../../../frontend/public/User/wp-content/themes/pawsitive/stylee35d.css';
  @import '../../../../frontend/public/User/wp-content/plugins/bold-page-builder/slick/slick1849.css';
  @import '../../../../frontend/public/User/wp-content/plugins/bt_cost_calculator/style.mine35d.css';
  @import '../../../../frontend/public/User/wp-content/plugins/contact-form-7/includes/css/stylesf658.css';
  @import '../../../../frontend/public/User/wp-content/plugins/bold-page-builder/css/front_end/content_elements.crush1849.css';
  
  </style>